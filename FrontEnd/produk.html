<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nanda Motor | Produk</title>

    <link
      rel="shortcut icon"
      href="assets/ICONandaMotor.ico"
      type="image/x-icon"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <script src="https://cdn.tailwindcss.com"></script>

    <meta
      name="description"
      content="Lihat produk-produk unggulan di Bengkel Nanda Motor."
    />
    
    <meta property="og:title" content="Produk - Nanda Motor" />

    <script
      type="module"
      src="https://cdn.jsdelivr.net/gh/domyid/tracker@main/index.js"
    ></script>
  </head>

  <body class="bg-white">
    <nav class="bg-white py-3 shadow-md fixed top-0 left-0 w-full z-50">
      <div
        class="container mx-auto flex items-center justify-between px-4 md:px-0"
      >
        <a href="index.html" class="flex items-center">
          <img
            src="assets/IMG/IMGLogoNandaMotor.png"
            class="h-10 md:h-12"
            alt="Logo Nanda Motor"
          />
        </a>

        <button
          id="navbar-toggle"
          class="md:hidden text-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-300 p-2 rounded-md"
        >
          <span><i class="fa-solid fa-bars text-xl"></i></span>
        </button>

        <div
          id="navbar-content"
          class="hidden md:flex flex-col md:flex-row md:items-center md:space-x-8 mt-4 md:mt-0 w-full md:w-auto absolute md:relative top-full left-0 bg-white md:bg-transparent shadow-md md:shadow-none p-4 md:p-0"
        >
          <ul
            class="flex flex-col md:flex-row md:space-x-8 space-y-2 md:space-y-0 text-lg md:text-base"
          >
            <li>
              <a
                class="text-gray-700 hover:text-blue-600 font-semibold transition duration-300"
                href="index.html"
                >Home</a
              >
            </li>
            <li>
              <a
                class="text-blue-600 font-semibold transition duration-300"
                href="produk.html"
                >Produk</a
              >
            </li>
            <li>
              <a
                class="text-gray-700 hover:text-blue-600 font-semibold transition duration-300"
                href="about.html"
                >Tentang</a
              >
            </li>
          </ul>

          <div
            class="flex items-center space-x-6 mt-4 md:mt-0 pt-4 md:pt-0 border-t md:border-t-0 border-gray-200 md:border-none"
          >
            <a
              href="login.html"
              class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-5 rounded-full transition duration-300 text-sm"
            >
              Login
            </a>
            <a href="#" class="text-gray-700 hover:text-blue-600 text-xl"
              ><i class="fa-solid fa-magnifying-glass"></i
            ></a>
            <a href="#" class="text-gray-700 hover:text-blue-600 text-xl"
              ><i class="fa-solid fa-cart-shopping"></i
            ></a>
          </div>
        </div>
      </div>
    </nav>

    <main>
      <section id="oli" class="pt-24 pb-16 bg-gray-50"> 
        <div class="container mx-auto px-4 text-center">
          <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-6">Katalog Produk</h2>
          <hr class="w-24 border-t-2 border-gray-300 mx-auto mb-6">
          <p class="text-lg text-gray-700 max-w-3xl mx-auto leading-relaxed">
            Stok terbaru langsung dari gudang kami.
          </p>
        </div>
        
        <div id="daftar-produk-container" class="container mx-auto px-4 mt-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            <p class="text-center col-span-full text-gray-500">Memuat produk...</p>
        </div>

      </section>
    </main>

    <footer class="bg-gray-800 text-gray-300 py-16">
      <div
        class="container mx-auto px-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12"
      >
        <div>
          <img
            src="assets/IMG/IMGLogoNandaMotor.png"
            class="h-10 mb-4"
            alt="Logo Nanda Motor"
          />
          <p class="text-sm">
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Hic
            provident aliquid perspiciatis, numquam facilis quam porro!
          </p>
        </div>

        <div>
          <h5 class="text-lg font-semibold text-white mb-4 uppercase">Fitur</h5>
          <ul class="space-y-2 text-sm">
            <li>
              <a href="#" class="hover:text-blue-400 transition duration-300"
                >Sparepart</a
              >
            </li>
            <li>
              <a href="#" class="hover:text-blue-400 transition duration-300"
                >Layanan Servis</a
              >
            </li>
            <li>
              <a href="#" class="hover:text-blue-400 transition duration-300"
                >Aksesoris</a
              >
            </li>
            <li>
              <a href="#" class="hover:text-blue-400 transition duration-300"
                >Promo</a
              >
            </li>
          </ul>
        </div>

        <div>
          <h5 class="text-lg font-semibold text-white mb-4 uppercase">
            Kontak
          </h5>
          <div class="space-y-3 text-sm">
            <div>
              <h6 class="text-xs font-semibold uppercase text-gray-400">
                Alamat
              </h6>
              <p>Lingk. Mukti Asih</p>
            </div>
            <div>
              <h6 class="text-xs font-semibold uppercase text-gray-400">
                No. HP
              </h6>
              <p>(+62) 8</p>
            </div>
            <div>
              <h6 class="text-xs font-semibold uppercase text-gray-400">
                Email
              </h6>
              <p>@gmail.com</p>
            </div>
          </div>
        </div>

        <div>
          <h5 class="text-lg font-semibold text-white mb-4 uppercase">Foto</h5>
          <div class="grid grid-cols-2 gap-2">
            <img
              class="w-full h-auto rounded bg-gray-700"
              src="https://via.placeholder.com/150"
              alt="Galeri 1"
            />
            <img
              class="w-full h-auto rounded bg-gray-700"
              src="https://via.placeholder.com/150"
              alt="Galeri 2"
            />
            <img
              class="w-full h-auto rounded bg-gray-700"
              src="https://via.placeholder.com/150"
              alt="Galeri 3"
            />
            <img
              class="w-full h-auto rounded bg-gray-700"
              src="https://via.placeholder.com/150"
              alt="Galeri 4"
            />
          </div>
        </div>
      </div>

      <div class="border-t border-gray-700 mt-12 pt-8">
        <div class="container mx-auto px-4">
          <div class="text-center md:text-left">
            <p class="text-sm">
              &copy; 2024 Nanda Motor | Nanda Septiana Ramadhani | 714240033
            </p>
          </div>
        </div>
      </div>
    </footer>

    <a href="https://wa.me/6285314627451?text=Halo%20Admin%20Nanda%20Motor,%20saya%20ingin%20bertanya%20tentang%20produk/servis." 
       target="_blank"
       class="fixed bottom-6 right-6 bg-green-500 hover:bg-green-600 text-white p-4 rounded-full shadow-lg z-50 transition duration-300 transform hover:scale-110 flex items-center justify-center group">
        
        <i class="fa-brands fa-whatsapp text-4xl"></i>
        
        <span class="absolute right-full mr-3 bg-gray-800 text-white text-xs font-bold px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap">
            Chat Nanda Motor
        </span>
    </a>

    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-HLGLQVMRYT"
    ></script>

    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-HLGLQVMRYT");
    </script>

    <script src="js/script.js"></script>

    <script>
      async function tampilkanProduk() {
        const container = document.getElementById('daftar-produk-container');
        
        try {
          const response = await fetch('http://localhost:3000/api/products');
          const products = await response.json();

          container.innerHTML = '';

          if (products.length === 0) {
            container.innerHTML = '<p class="text-center col-span-full text-gray-500">Belum ada produk yang tersedia.</p>';
            return;
          }

          products.forEach(produk => {
            const hargaRupiah = parseInt(produk.harga).toLocaleString('id-ID');
  
            const gambar = produk.gambar || 'https://via.placeholder.com/300x300?text=No+Image';

            const cardHTML = `
              <div class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition duration-300 transform hover:-translate-y-1">
                <div class="relative h-48 overflow-hidden bg-gray-100">
                    <img src="${gambar}" alt="${produk.nama_produk}" class="w-full h-full object-cover">
                    <span class="absolute top-0 right-0 bg-blue-600 text-white text-xs font-bold px-2 py-1 m-2 rounded">
                        ${produk.kategori}
                    </span>
                </div>
                
                <div class="p-6">
                  <h3 class="text-xl font-bold text-gray-800 mb-2 truncate" title="${produk.nama_produk}">
                    ${produk.nama_produk}
                  </h3>
                  
                  <div class="mb-4 text-sm">
                    ${produk.stok > 0 
                      ? `<span class="text-green-600 font-semibold"><i class="fas fa-check-circle"></i> Stok Tersedia (${produk.stok})</span>` 
                      : `<span class="text-red-500 font-semibold"><i class="fas fa-times-circle"></i> Stok Habis</span>`
                    }
                  </div>

                  <div class="flex justify-between items-center">
                    <span class="text-lg font-bold text-blue-600">Rp ${hargaRupiah}</span>
                    <button class="bg-gray-800 hover:bg-gray-700 text-white p-2 rounded-full transition">
                        <i class="fas fa-shopping-cart"></i>
                    </button>
                  </div>
                </div>
              </div>
            `;

            container.insertAdjacentHTML('beforeend', cardHTML);
          });

        } catch (error) {
          console.error("Gagal mengambil produk:", error);
          container.innerHTML = '<p class="text-center col-span-full text-red-500">Gagal memuat produk. Pastikan server menyala.</p>';
        }
      }

      // Jalankan fungsi saat halaman dimuat
      document.addEventListener('DOMContentLoaded', tampilkanProduk);
    </script>

  </body>
</html>
